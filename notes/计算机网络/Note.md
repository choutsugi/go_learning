# 一、协议分层

## OSI七层模型

依据网络原理而设计。

- 物理层：物理接口规范（网卡）。
- 数据链路层：相邻节点数据传输，MAC地址，形成帧。
- 网络层：路由选择，流量控制，IP地址，形成IP包。
- 传输路：端口地址，为两台主机进程之间的通信提供服务。（TCP、UDP协议）
- 会话层：负责建立、管理和终止会话。（RPC协议）
- 表示层：解释交换数据的含义（解决跨平台），提供数据压缩、数据加密和数据描述服务。
- 应用层：规定应用进程间的交互规则，为不同的应用层协议和网络应用提供服务。（HTTP、FTP、DNS协议）

## TCP/IP模型

实际应用。

- 网络接入层：对应OSI中的物理层和数据链路层。
- 网际互连层：对应OSI中的网络层，负责相同或不同网络计算机之间的通信；IP协议提供无连接、不可靠的数据报传递服务（选择传送路线），此外还包括互联网组管理协议（IGMP）和互联网控制报文协议（ICMP）。
- 传输层：对应OSI中的传输层。
- 应用层：合并OSI中的会话层、表示层、应用层。（会话层、表示层和应用层都在应用程序内部实现）

## 数据封装过程

应用数据报（添加校验）=> 传输层报文段（增加TCP/UDP头部） => 网络层（增加IP头部） => 链路层帧（增加MAC头） => 物理层比特流

# 二、应用层

## http头部的组成

HTTP头部包含：通用头部、请求头部、响应同步和实体头部。

## Keep-Alive和非Keep-Alive的区别

- Keep-Alive：保持长连接导致系统资源被无效占用，故应设置超时时间（规定时间内无请求即断开连接）。
- 非Keep-Alive：每次请求都需重新建立连接，增加服务器负担。

## 长连接和短连接的使用场景

- 长连接：需要频繁请求，如点对点通信，网络游戏。
- 短连接：用户较多的Web服务。

## 获取HTTP报文长度

查看响应消息中的`Content-Length`字段。

