## 文件上传

```go
func main() {
	router := gin.Default()

	router.POST("/testUpAndDown", func(c *gin.Context){
		// 上传文件并传入其他参数
		file, _ := c.FormFile("file")
		name := c.PostForm("name")
		// 保存前端上传的文件
		// 方式一
		//c.SaveUploadedFile(file, "./source/" + file.Filename)
		// 方式二
		in, _ := file.Open()
		defer in.Close()
		out, _:= os.Create("./source/" + file.Filename)
		defer out.Close()
		io.Copy(out, in)
		c.JSON(200, gin.H{
			"msg":file,
			"name":name,
		})
	})

	router.Run(":8081")
}

```

**Postman：**模拟上传文件。

- 请求地址：localhost:8081/testUpAndDown

- Header：

  ```json
  {
  	"KEY1":"Context-Type",
  	"VALUE1":"multipart/form-data",
  	"KEY2":"name",
  	"VALUE2":"ohiua"
  }
  ```

- Body（raw）：form-data

  ```json
  {
  	"KEY":"file(type:file)",
  	"VALUE":"选择文件",
  }
  ```

## 文件下载

从前端接受一个吻文件并向前端返回该文件。

```go
router.POST("/testUpAndDown", func(c *gin.Context){
    file, _ := c.FormFile("file")
    in, _ := file.Open()
    defer in.Close()
    out, _:= os.Create("./source/" + file.Filename)
    defer out.Close()
    io.Copy(out, in)
    c.Writer.Header().Add("Context-Disposition", fmt.Sprintf("attachment; filename =%s", file.Filename))
    c.File("./source/" + file.Filename)	// 向前端返回一个文件
})
```

## 多文件上传

```go
func main() {
	router := gin.Default()

	router.POST("/testUpAndDown", func(c *gin.Context){
		form, err := c.MultipartForm()
		if err != nil {
			fmt.Println(err.Error())
		}
		files := form.File["file"]
		for _, file := range files {
			fmt.Println(file.Filename)
		}
	})

	router.Run(":8081")
}
```

Postman：选择多个文件上传测试。

